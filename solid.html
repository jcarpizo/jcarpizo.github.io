



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta content="PHP 5.4.15+ with PHP Unit testing - Object Oriented Programming in PHP / RESTful API’s ,PHP Code Sniffer for checking coding compliance / PSR-2 standard coding style ,MVC PHP Framework – Symfony , Laravel, CakePHP and Phalcon,Docker Engine / Docker Hub,Guzzle, PHP HTTP Client,Auth0's API authorization,Google API, Twillio API, and Facebook API Integration,Object Relational Mapper (ORM) / Doctrine Query Language,JAVA Programming (J2SE),Angular JS 1 / 2 with Protractor End to End Tesing for Angular- JavaScript’s Framework,Joomla, Wordpress and Drupal ( Content Management System ), Adobe Flex PHP / Adobe ColdFusion, Unix Shell Scripting in Unix / Linux Environment,Twitter Bootstrap / Foundation,Grunt: The JavaScript Task Runner ,Qunit Javascript Unit Testing,Python 2.7.10 ,Highcharts JS ,Node JS, React JS, Vue JS, JQuery, and Navtive Javascript ,eJabberd XMPP Server ,Bitbuket with Pipeline Build Integration ,GitLab with Gitlab CI integration ,Git with Git Flow Integration ,MS SQL Enterprise ,MySQL with MySql Workbench and Sequel Pro, Postgre SQL,Composer for PHP dependencies,WebPack Node JS for JavaScript and Css dependencies ,Solaris 10 / Ubuntu 16.04 / Fedora 18 / Backtrack / Mac OS X – Unix and Linux OS ,Windows XP, Vista, 7 and 8 ,VMware Server / Virtual Box / Homestead ,HTML5, CSS and SASS ,SPHINX - Python Documentation Generator ,Sample API docs for mobile dev - Leaders Summit API Docs." name="description" />
<meta content="PHP 5.4.15+ with PHP Unit testing - Object Oriented Programming in PHP / RESTful API’s ,PHP Code Sniffer for checking coding compliance / PSR-2 standard coding style ,MVC PHP Framework – Symfony , Laravel, CakePHP and Phalcon,Docker Engine / Docker Hub,Guzzle, PHP HTTP Client,Auth0's API authorization,Google API, Twillio API, and Facebook API Integration,Object Relational Mapper (ORM) / Doctrine Query Language,JAVA Programming (J2SE),Angular JS 1 / 2 with Protractor End to End Tesing for Angular- JavaScript’s Framework,Joomla, Wordpress and Drupal ( Content Management System ), Adobe Flex PHP / Adobe ColdFusion, Unix Shell Scripting in Unix / Linux Environment,Twitter Bootstrap / Foundation,Grunt: The JavaScript Task Runner ,Qunit Javascript Unit Testing,Python 2.7.10 ,Highcharts JS ,Node JS, React JS, Vue JS, JQuery, and Navtive Javascript ,eJabberd XMPP Server ,Bitbuket with Pipeline Build Integration ,GitLab with Gitlab CI integration ,Git with Git Flow Integration ,MS SQL Enterprise ,MySQL with MySql Workbench and Sequel Pro, Postgre SQL,Composer for PHP dependencies,WebPack Node JS for JavaScript and Css dependencies ,Solaris 10 / Ubuntu 16.04 / Fedora 18 / Backtrack / Mac OS X – Unix and Linux OS ,Windows XP, Vista, 7 and 8 ,VMware Server / Virtual Box / Homestead ,HTML5, CSS and SASS ,SPHINX - Python Documentation Generator ,Sample API docs for mobile dev - Leaders Summit API Docs." name="keywords" />
<meta content="Jasper Carpizo" name="author" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The First 5 Principles of Object Oriented Design &mdash; Jasper Carpizo</title>
  

  
  
    <link rel="shortcut icon" href="_static/jenkins.ico"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Unix / Linux File permissions" href="file-permission.html" />
    <link rel="prev" title="Unit Testing with PHP Unit" href="unit-testing-phpunit.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> jcarpizo.github.io
          

          
          </a>

          
            
            
              <div class="version">
                new \DateTimeImmutable()
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="head-first-design-patterns.html">Head First Java</a></li>
<li class="toctree-l1"><a class="reference internal" href="head-first-java.html">Head First Design Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="design-patterns.html">Design Patterns Card</a></li>
<li class="toctree-l1"><a class="reference internal" href="lamp.html">Install LAMP in one command</a></li>
<li class="toctree-l1"><a class="reference internal" href="lemp.html">How To Install Linux, Nginx, MySQL, PHP (LEMP stack) on Ubuntu 18.04</a></li>
<li class="toctree-l1"><a class="reference internal" href="xampp.html">XAMPP - Replacing MariaDB with MySQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="mac-mysql.html">Install MySQL on Mac OS X</a></li>
<li class="toctree-l1"><a class="reference internal" href="php-install.html">Install PHP 5.6 or PHP 7.1 on Ubuntu 16.04, 14.04 using PPA</a></li>
<li class="toctree-l1"><a class="reference internal" href="sphinx.html">Install Sphinx Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-node.html">Install Node.js via Package Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="ejabberd.html">Install eJabberd XMPP Server on Ubuntu 14</a></li>
<li class="toctree-l1"><a class="reference internal" href="mac-php.html">Update PHP on Mac OS X</a></li>
<li class="toctree-l1"><a class="reference internal" href="php-codesniffer.html">PHP CodeSniffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="virtual-host.html">Set Up Apache Virtual Hosts on Ubuntu 16.04 LTS</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiple-php.html">Switch between Multiple PHP Version on Ubuntu</a></li>
<li class="toctree-l1"><a class="reference internal" href="doctrine.html">Doctrine Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="unit-testing-phpunit.html">Unit Testing with PHP Unit</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The First 5 Principles of Object Oriented Design</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#single-responsibility">Single-responsibility</a></li>
<li class="toctree-l2"><a class="reference internal" href="#open-closed">Open-closed</a></li>
<li class="toctree-l2"><a class="reference internal" href="#liskov-substitution">Liskov substitution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#interface-segregation">Interface segregation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependency-inversion">Dependency Inversion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="file-permission.html">Unix / Linux File permissions</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="git.html">Git Training Videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-flow.html">Git Flow Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="adwords-api.html">Adwords API Reporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="tao-of-programming.html">The Tao / Zen of Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="php-storm.html">PhpStorm Keymap Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="sync-gmail-inbox.html">Synchronized GMail Inbox [PHP]</a></li>
<li class="toctree-l1"><a class="reference internal" href="repositories-doctrine.html">Using Repositories in Doctrine 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="composite-pattern.html">Composite Pattern in PHP</a></li>
<li class="toctree-l1"><a class="reference internal" href="owasp.html">OWASP Secure Coding Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="mysql.html">Getting the Best MySQL Performance in Your Products</a></li>
<li class="toctree-l1"><a class="reference internal" href="menu-tree.html">Build a Menu with Recursive Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="vim-as-php-ide.html">Vi / Vim Editor as PHP IDE</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">jcarpizo.github.io</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>The First 5 Principles of Object Oriented Design</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-first-5-principles-of-object-oriented-design">
<h1>The First 5 Principles of Object Oriented Design<a class="headerlink" href="#the-first-5-principles-of-object-oriented-design" title="Permalink to this headline">¶</a></h1>
<p>These principles, when combined together, make it easy for a programmer to develop software that are easy to maintain and extend. They also make it easy for developers to avoid code smells, easily refactor code, and are also a part of the agile or adaptive software development.</p>
<div class="section" id="single-responsibility">
<h2>Single-responsibility<a class="headerlink" href="#single-responsibility" title="Permalink to this headline">¶</a></h2>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>A class should have one and only one reason to change, meaning that a class should have only one job.</p>
</div>
<p>For example, say we have some shapes and we wanted to sum all the areas of the shapes. Well this is pretty simple right?</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Circle</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nv">$radius</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$radius</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">radius</span> <span class="o">=</span> <span class="nv">$radius</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">Square</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nv">$length</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$length</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">length</span> <span class="o">=</span> <span class="nv">$length</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>First, we create our shapes classes and have the constructors setup the required parameters. Next, we move on by creating the AreaCalculator class and then write up our logic to sum up the areas of all provided shapes.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AreaCalculator</span>
<span class="p">{</span>
     <span class="k">protected</span> <span class="nv">$shapes</span><span class="p">;</span>

     <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$shapes</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span>
     <span class="p">{</span>
         <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">shapes</span> <span class="o">=</span> <span class="nv">$shapes</span><span class="p">;</span>
     <span class="p">}</span>

     <span class="k">public</span> <span class="k">function</span> <span class="nf">sum</span><span class="p">()</span>
     <span class="p">{</span>
         <span class="c1">// logic to sum the areas</span>
     <span class="p">}</span>

     <span class="k">public</span> <span class="k">function</span> <span class="nf">output</span><span class="p">()</span>
     <span class="p">{</span>
         <span class="k">return</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
             <span class="s2">&quot;&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;Sum of the areas of provided shapes: &quot;</span><span class="p">,</span>
                 <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">sum</span><span class="p">(),</span>
             <span class="s2">&quot;&quot;</span>
         <span class="p">));</span>
     <span class="p">}</span>
 <span class="p">}</span>
</pre></div>
</div>
<p>To use the <strong>AreaCalculator</strong> class, we simply instantiate the class and pass in an array of shapes, and display the output at the bottom of the page.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$shapes</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="k">new</span> <span class="nx">Circle</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
    <span class="k">new</span> <span class="nx">Square</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
    <span class="k">new</span> <span class="nx">Square</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="p">);</span>

<span class="nv">$areas</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AreaCalculator</span><span class="p">(</span><span class="nv">$shapes</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$areas</span><span class="o">-&gt;</span><span class="na">output</span><span class="p">()</span>
</pre></div>
</div>
<p>The problem with the output method is that the <strong>AreaCalculator</strong> handles the logic to output the data. Therefore, what if the user wanted to output the data as json or something else?</p>
<p>All of that logic would be handled by the <strong>AreaCalculator</strong> class, this is what SRP frowns against; the AreaCalculator class should only sum the areas of provided shapes, it should not care whether the user wants json or HTML.</p>
<p>So, to fix this you can create an <strong>SumCalculatorOutputter</strong> class and use this to handle whatever logic you need to handle how the sum areas of all provided shapes are displayed.</p>
<p>The <strong>SumCalculatorOutputter</strong> class would work like this:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$shapes</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="k">new</span> <span class="nx">Circle</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
    <span class="k">new</span> <span class="nx">Square</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
    <span class="k">new</span> <span class="nx">Square</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="p">);</span>

<span class="nv">$areas</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AreaCalculator</span><span class="p">(</span><span class="nv">$shapes</span><span class="p">);</span>
<span class="nv">$output</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SumCalculatorOutputter</span><span class="p">(</span><span class="nv">$areas</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$output</span><span class="o">-&gt;</span><span class="na">JSON</span><span class="p">();</span>
<span class="k">echo</span> <span class="nv">$output</span><span class="o">-&gt;</span><span class="na">HAML</span><span class="p">();</span>
<span class="k">echo</span> <span class="nv">$output</span><span class="o">-&gt;</span><span class="na">HTML</span><span class="p">();</span>
<span class="k">echo</span> <span class="nv">$output</span><span class="o">-&gt;</span><span class="na">JADE</span><span class="p">();</span>
</pre></div>
</div>
<p>Now, whatever logic you need to output the data to the user is now handled by the <strong>SumCalculatorOutputter</strong> class.</p>
</div>
<div class="section" id="open-closed">
<h2>Open-closed<a class="headerlink" href="#open-closed" title="Permalink to this headline">¶</a></h2>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Objects or entities should be open for extension, but closed for modification.</p>
</div>
<p>This simply means that a class should be easily extendable without modifying the class itself. Let’s take a look at the AreaCalculator class, especially it’s sum method.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">sum</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">foreach</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">shapes</span> <span class="k">as</span> <span class="nv">$shape</span><span class="p">)</span>
    <span class="p">{</span>

        <span class="k">if</span><span class="p">(</span><span class="nb">is_a</span><span class="p">(</span><span class="nv">$shape</span><span class="p">,</span> <span class="s1">&#39;Square&#39;</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="nv">$area</span><span class="p">[]</span> <span class="o">=</span> <span class="nb">pow</span><span class="p">(</span><span class="nv">$shape</span><span class="o">-&gt;</span><span class="na">length</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="nb">is_a</span><span class="p">(</span><span class="nv">$shape</span><span class="p">,</span> <span class="s1">&#39;Circle&#39;</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="nv">$area</span><span class="p">[]</span> <span class="o">=</span> <span class="nb">pi</span><span class="p">()</span> <span class="o">*</span> <span class="nb">pow</span><span class="p">(</span><span class="nv">$shape</span><span class="o">-&gt;</span><span class="na">radius</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nb">array_sum</span><span class="p">(</span><span class="nv">$area</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If we wanted the <strong>sum</strong> method to be able to sum the areas of more shapes, we would have to add more <strong>if/else blocks</strong> and that goes against the Open-closed principle.</p>
<p>A way we can make this <strong>sum</strong> method better is to remove the logic to calculate the area of each shape out of the sum method and attach it to the shape’s class.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Square</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nv">$length</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$length</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">length</span> <span class="o">=</span> <span class="nv">$length</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">area</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nb">pow</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">length</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The same thing should be done for the <strong>Circle</strong> class, an <strong>area</strong> method should be added. Now, to calculate the sum of any shape provided should be as simple as:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">sum</span><span class="p">()</span>
<span class="p">{</span>

    <span class="k">foreach</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">shapes</span> <span class="k">as</span> <span class="nv">$shape</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$area</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$shape</span><span class="o">-&gt;</span><span class="na">area</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nb">array_sum</span><span class="p">(</span><span class="nv">$area</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now we can create another shape class and pass it in when calculating the sum without breaking our code. However, now another problem arises, how do we know that the object passed into the <strong>AreaCalculator</strong> is actually a shape or if the shape has a method named <strong>area</strong>?</p>
<p>Coding to an interface is an integral part of <strong>S.O.L.I.D</strong>, a quick example is we create an interface, that every shape implements:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">interface</span> <span class="nx">ShapeInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">area</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">Circle</span> <span class="k">implements</span> <span class="nx">ShapeInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nv">$radius</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$radius</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">radius</span> <span class="o">=</span> <span class="nv">$radius</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">area</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nb">pi</span><span class="p">()</span> <span class="o">*</span> <span class="nb">pow</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">radius</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In our <strong>AreaCalculator</strong> sum method we can check if the shapes provided are actually instances of the <strong>ShapeInterface</strong>, otherwise we throw an exception:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">public</span> <span class="k">function</span> <span class="nf">sum</span><span class="p">()</span>
<span class="p">{</span>

   <span class="k">foreach</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">shapes</span> <span class="k">as</span> <span class="nv">$shape</span><span class="p">)</span>
   <span class="p">{</span>
       <span class="k">if</span><span class="p">(</span><span class="nb">is_a</span><span class="p">(</span><span class="nv">$shape</span><span class="p">,</span> <span class="s1">&#39;ShapeInterface&#39;</span><span class="p">))</span>
       <span class="p">{</span>
           <span class="nv">$area</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$shape</span><span class="o">-&gt;</span><span class="na">area</span><span class="p">();</span>
           <span class="k">continue</span><span class="p">;</span>
       <span class="p">}</span>

       <span class="k">throw</span> <span class="k">new</span> <span class="nx">AreaCalculatorInvalidShapeException</span><span class="p">;</span>
   <span class="p">}</span>

   <span class="k">return</span> <span class="nb">array_sum</span><span class="p">(</span><span class="nv">$area</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="liskov-substitution">
<h2>Liskov substitution<a class="headerlink" href="#liskov-substitution" title="Permalink to this headline">¶</a></h2>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Let <strong>q(x)</strong> be a property provable about objects of <strong>x</strong> of type <strong>T</strong>. Then <strong>q(y)</strong> should be provable for objects <strong>y</strong> of type <strong>S</strong> where <strong>S</strong> is a subtype of <strong>T</strong>.</p>
</div>
<p>All this is stating is that every subclass/derived class should be substitutable for their base/parent class.</p>
<p>Still making use of out <strong>AreaCalculator</strong> class, say we have a <strong>VolumeCalculator</strong> class that extends the <strong>AreaCalculator</strong> class:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">VolumeCalculator</span> <span class="k">extends</span> <span class="nx">AreaCalulator</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nv">$shapes</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">(</span><span class="nv">$shapes</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">sum</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// logic to calculate the volumes and then return and array of output</span>
        <span class="k">return</span> <span class="k">array</span><span class="p">(</span><span class="nv">$summedData</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the <strong>SumCalculatorOutputter</strong> class:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SumCalculatorOutputter</span>
<span class="p">{</span>
     <span class="k">protected</span> <span class="nv">$calculator</span><span class="p">;</span>

     <span class="k">public</span> <span class="k">function</span> <span class="nf">__constructor</span><span class="p">(</span><span class="nx">AreaCalculator</span> <span class="nv">$calculator</span><span class="p">)</span>
     <span class="p">{</span>
         <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">calculator</span> <span class="o">=</span> <span class="nv">$calculator</span><span class="p">;</span>
     <span class="p">}</span>

     <span class="k">public</span> <span class="k">function</span> <span class="nf">JSON</span><span class="p">()</span>
     <span class="p">{</span>
         <span class="nv">$data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
             <span class="s1">&#39;sum&#39;</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">calculator</span><span class="o">-&gt;</span><span class="na">sum</span><span class="p">();</span>
         <span class="p">);</span>

         <span class="k">return</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
     <span class="p">}</span>

     <span class="k">public</span> <span class="k">function</span> <span class="nf">HTML</span><span class="p">()</span>
     <span class="p">{</span>
         <span class="k">return</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
             <span class="s1">&#39;&#39;</span><span class="p">,</span>
                 <span class="s1">&#39;Sum of the areas of provided shapes: &#39;</span><span class="p">,</span>
                 <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">calculator</span><span class="o">-&gt;</span><span class="na">sum</span><span class="p">(),</span>
             <span class="s1">&#39;&#39;</span>
         <span class="p">));</span>
     <span class="p">}</span>
 <span class="p">}</span>
</pre></div>
</div>
<p>If we tried to run an example like this:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="nv">$areas</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AreaCalculator</span><span class="p">(</span><span class="nv">$shapes</span><span class="p">);</span>
<span class="nv">$volumes</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AreaCalculator</span><span class="p">(</span><span class="nv">$solidShapes</span><span class="p">);</span>

<span class="nv">$output</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SumCalculatorOutputter</span><span class="p">(</span><span class="nv">$areas</span><span class="p">);</span>
<span class="nv">$output2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SumCalculatorOutputter</span><span class="p">(</span><span class="nv">$volumes</span><span class="p">);</span>
</pre></div>
</div>
<p>The program does not squawk, but when we call the <strong>HTML</strong> method on the <strong>$output2</strong> object we get an <strong>E_NOTICE</strong> error informing us of an array to string conversion.</p>
<p>To fix this, instead of returning an array from the <strong>VolumeCalculator</strong> class sum method, you should simply:</p>
</div>
<div class="section" id="interface-segregation">
<h2>Interface segregation<a class="headerlink" href="#interface-segregation" title="Permalink to this headline">¶</a></h2>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>A client should never be forced to implement an interface that it doesn’t use or clients shouldn’t be forced to depend on methods they do not use.</p>
</div>
<p>Still using our shapes example, we know that we also have solid shapes, so since we would also want to calculate the volume of the shape, we can add another contract to the <strong>ShapeInterface</strong>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">interface</span> <span class="nx">ShapeInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">area</span><span class="p">();</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">volume</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Any shape we create must implement the <strong>volume</strong> method, but we know that squares are flat shapes and that they do not have volumes, so this interface would force the <strong>Square</strong> class to implement a method that it has no use of.</p>
<p><strong>ISP</strong> says no to this, instead you could create another interface called <strong>SolidShapeInterface</strong> that has the <strong>volume</strong> contract and solid shapes like cubes e.t.c can implement this interface:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">interface</span> <span class="nx">ShapeInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">area</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">interface</span> <span class="nx">SolidShapeInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">volume</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">Cuboid</span> <span class="k">implements</span> <span class="nx">ShapeInterface</span><span class="p">,</span> <span class="nx">SolidShapeInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">area</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// calculate the surface area of the cuboid</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">volume</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// calculate the volume of the cuboid</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This is a much better approach, but a pitfall to watch out for is when type-hinting these interfaces, instead of using a <strong>ShapeInterface</strong> or a <strong>SolidShapeInterface</strong>.</p>
<p>You can create another interface, maybe <strong>ManageShapeInterface</strong>, and implement it on both the flat and solid shapes, this way you can easily see that it has a single API for managing the shapes. For example:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">interface</span> <span class="nx">ManageShapeInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">calculate</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">Square</span> <span class="k">implements</span> <span class="nx">ShapeInterface</span><span class="p">,</span> <span class="nx">ManageShapeInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">area</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="cm">/*Do stuff here*/</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">calculate</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">area</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">Cuboid</span> <span class="k">implements</span> <span class="nx">ShapeInterface</span><span class="p">,</span> <span class="nx">SolidShapeInterface</span><span class="p">,</span> <span class="nx">ManageShapeInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">area</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="cm">/*Do stuff here*/</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">volume</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="cm">/*Do stuff here*/</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">calculate</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">area</span><span class="p">()</span> <span class="o">+</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">volume</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now in <strong>AreaCalculator</strong> class, we can easily replace the call to the <strong>area</strong> method with <strong>calculate</strong> and also check if the object is an instance of the <strong>ManageShapeInterface</strong> and not the <strong>ShapeInterface</strong>.</p>
</div>
<div class="section" id="dependency-inversion">
<h2>Dependency Inversion<a class="headerlink" href="#dependency-inversion" title="Permalink to this headline">¶</a></h2>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Entities must depend on abstractions not on concretions. It states that the high level module must not depend on the low level module, but they should depend on abstractions.</p>
</div>
<p>This might sound bloated, but it is really easy to understand. This principle allows for decoupling, an example that seems like the best way to explain this principle:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">PasswordReminder</span>
<span class="p">{</span>
     <span class="k">private</span> <span class="nv">$dbConnection</span><span class="p">;</span>

     <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">MySQLConnection</span> <span class="nv">$dbConnection</span><span class="p">)</span>
     <span class="p">{</span>
         <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dbConnection</span> <span class="o">=</span> <span class="nv">$dbConnection</span><span class="p">;</span>
     <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>First the <strong>MySQLConnection</strong> is the low level module while the <strong>PasswordReminder</strong> is high level, but according to the definition of <strong>D</strong> in S.O.L.I.D. which states that Depend on Abstraction not on concretions, this snippet above violates this principle as the <strong>PasswordReminder</strong> class is being forced to depend on the <strong>MySQLConnection</strong> class.</p>
<p>Later if you were to change the database engine, you would also have to edit the <strong>PasswordReminder</strong> class and thus violates <strong>Open-close principle</strong>.</p>
<p>The <strong>PasswordReminder</strong> class should not care what database your application uses, to fix this again we “code to an interface”, since high level and low level modules should depend on abstraction, we can create an interface:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">interface</span> <span class="nx">DBConnectionInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">connect</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The interface has a connect method and the <strong>MySQLConnection</strong> class implements this interface, also instead of directly type-hinting <strong>MySQLConnection</strong> class in the constructor of the <strong>PasswordReminder</strong>, we instead type-hint the interface and no matter the type of database your application uses, the <strong>PasswordReminder</strong> class can easily connect to the database without any problems and <strong>OCP</strong> is not violated.</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MySQLConnection</span> <span class="k">implements</span> <span class="nx">DBConnectionInterface</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">connect</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s2">&quot;Database connection&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">PasswordReminder</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$dbConnection</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">DBConnectionInterface</span> <span class="nv">$dbConnection</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dbConnection</span> <span class="o">=</span> <span class="nv">$dbConnection</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>According to the little snippet above, you can now see that both the high level and low level modules depend on abstraction.</strong></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="file-permission.html" class="btn btn-neutral float-right" title="Unix / Linux File permissions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="unit-testing-phpunit.html" class="btn btn-neutral float-left" title="Unit Testing with PHP Unit" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2004-2017 Jasper Carpizo

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-133821205-1', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>