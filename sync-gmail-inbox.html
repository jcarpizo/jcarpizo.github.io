


<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" /><meta content="PHP 5.4.15+ with PHP Unit testing - Object Oriented Programming in PHP / RESTful API’s ,PHP Code Sniffer for checking coding compliance / PSR-2 standard coding style ,MVC PHP Framework – Symfony , Laravel, CakePHP and Phalcon,Docker Engine / Docker Hub,Guzzle, PHP HTTP Client,Auth0's API authorization,Google API, Twillio API, and Facebook API Integration,Object Relational Mapper (ORM) / Doctrine Query Language,JAVA Programming (J2SE),Angular JS 1 / 2 with Protractor End to End Tesing for Angular- JavaScript’s Framework,Joomla, Wordpress and Drupal ( Content Management System ), Adobe Flex PHP / Adobe ColdFusion, Unix Shell Scripting in Unix / Linux Environment,Twitter Bootstrap / Foundation,Grunt: The JavaScript Task Runner ,Qunit Javascript Unit Testing,Python 2.7.10 ,Highcharts JS ,Node JS, React JS, Vue JS, JQuery, and Navtive Javascript ,eJabberd XMPP Server ,Bitbuket with Pipeline Build Integration ,GitLab with Gitlab CI integration ,Git with Git Flow Integration ,MS SQL Enterprise ,MySQL with MySql Workbench and Sequel Pro, Postgre SQL,Composer for PHP dependencies,WebPack Node JS for JavaScript and Css dependencies ,Solaris 10 / Ubuntu 16.04 / Fedora 18 / Backtrack / Mac OS X – Unix and Linux OS ,Windows XP, Vista, 7 and 8 ,VMware Server / Virtual Box / Homestead ,HTML5, CSS and SASS ,SPHINX - Python Documentation Generator ,Sample API docs for mobile dev - Leaders Summit API Docs." name="description" />
<meta content="PHP 5.4.15+ with PHP Unit testing - Object Oriented Programming in PHP / RESTful API’s ,PHP Code Sniffer for checking coding compliance / PSR-2 standard coding style ,MVC PHP Framework – Symfony , Laravel, CakePHP and Phalcon,Docker Engine / Docker Hub,Guzzle, PHP HTTP Client,Auth0's API authorization,Google API, Twillio API, and Facebook API Integration,Object Relational Mapper (ORM) / Doctrine Query Language,JAVA Programming (J2SE),Angular JS 1 / 2 with Protractor End to End Tesing for Angular- JavaScript’s Framework,Joomla, Wordpress and Drupal ( Content Management System ), Adobe Flex PHP / Adobe ColdFusion, Unix Shell Scripting in Unix / Linux Environment,Twitter Bootstrap / Foundation,Grunt: The JavaScript Task Runner ,Qunit Javascript Unit Testing,Python 2.7.10 ,Highcharts JS ,Node JS, React JS, Vue JS, JQuery, and Navtive Javascript ,eJabberd XMPP Server ,Bitbuket with Pipeline Build Integration ,GitLab with Gitlab CI integration ,Git with Git Flow Integration ,MS SQL Enterprise ,MySQL with MySql Workbench and Sequel Pro, Postgre SQL,Composer for PHP dependencies,WebPack Node JS for JavaScript and Css dependencies ,Solaris 10 / Ubuntu 16.04 / Fedora 18 / Backtrack / Mac OS X – Unix and Linux OS ,Windows XP, Vista, 7 and 8 ,VMware Server / Virtual Box / Homestead ,HTML5, CSS and SASS ,SPHINX - Python Documentation Generator ,Sample API docs for mobile dev - Leaders Summit API Docs." name="keywords" />
<meta content="Jasper Carpizo" name="author" />

  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Synchronized GMail Inbox [PHP] &#8212; Jasper Carpizo</title>
    <link rel="stylesheet" href="_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="shortcut icon" href="_static/jenkins.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Using Repositories in Doctrine 2" href="repositories-doctrine.html" />
    <link rel="prev" title="PhpStorm Keymap Reference" href="php-storm.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="repositories-doctrine.html" title="Using Repositories in Doctrine 2"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="php-storm.html" title="PhpStorm Keymap Reference"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Reference Documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar"><a href="
    index.html" class="text-logo">Jasper Carpizo</a>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="lamp.html">Install LAMP in one command</a></li>
<li class="toctree-l1"><a class="reference internal" href="lemp.html">How To Install Linux, Nginx, MySQL, PHP (LEMP stack) on Ubuntu 18.04</a></li>
<li class="toctree-l1"><a class="reference internal" href="xampp.html">XAMPP - Replacing MariaDB with MySQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="mac-mysql.html">Install MySQL on Mac OS X</a></li>
<li class="toctree-l1"><a class="reference internal" href="php-install.html">Install PHP 5.6 or PHP 7.1 on Ubuntu 16.04, 14.04 using PPA</a></li>
<li class="toctree-l1"><a class="reference internal" href="sphinx.html">Install Sphinx Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-node.html">Install Node.js via Package Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="ejabberd.html">Install eJabberd XMPP Server on Ubuntu 14</a></li>
<li class="toctree-l1"><a class="reference internal" href="mac-php.html">Update PHP on Mac OS X</a></li>
<li class="toctree-l1"><a class="reference internal" href="php-codesniffer.html">PHP CodeSniffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="virtual-host.html">Set Up Apache Virtual Hosts on Ubuntu 16.04 LTS</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiple-php.html">Switch between Multiple PHP Version on Ubuntu</a></li>
<li class="toctree-l1"><a class="reference internal" href="doctrine.html">Doctrine Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="solid.html">The First 5 Principles of Object Oriented Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="file-permission.html">Unix / Linux File permissions</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="git.html">Git Training Videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-flow.html">Git Flow Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="adwords-api.html">Adwords API Reporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="tao-of-programming.html">The Tao / Zen of Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="php-storm.html">PhpStorm Keymap Reference</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Synchronized GMail Inbox [PHP]</a></li>
<li class="toctree-l1"><a class="reference internal" href="repositories-doctrine.html">Using Repositories in Doctrine 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="composite-pattern.html">Composite Pattern in PHP</a></li>
<li class="toctree-l1"><a class="reference internal" href="owasp.html">OWASP Secure Coding Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="mysql.html">Getting the Best MySQL Performance in Your Products</a></li>
<li class="toctree-l1"><a class="reference internal" href="menu-tree.html">Build a Menu with Recursive Functions</a></li>
</ul>

    
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="index.html">Docs</a></li>
              
              <li>Synchronized GMail Inbox [PHP]</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <div class="section" id="synchronized-gmail-inbox-php">
<h1>Synchronized GMail Inbox [PHP]<a class="headerlink" href="#synchronized-gmail-inbox-php" title="Permalink to this headline">¶</a></h1>
<div class="highlight-php notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">Carbon\Carbon</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Console\Command</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">GMailSync</span> <span class="k">extends</span> <span class="nx">Command</span>
<span class="p">{</span>

    <span class="k">private</span> <span class="nv">$mailService</span><span class="p">;</span>
    <span class="sd">/**</span>
<span class="sd">     * The name and signature of the console command.</span>
<span class="sd">     *</span>
<span class="sd">     * @var string</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="nv">$signature</span> <span class="o">=</span> <span class="s1">&#39;google:sync-email&#39;</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * The console command description.</span>
<span class="sd">     *</span>
<span class="sd">     * @var string</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="nv">$description</span> <span class="o">=</span> <span class="s1">&#39;Run to synchronize google emails&#39;</span><span class="p">;</span>

    <span class="sd">/**</span>
<span class="sd">     * Create a new command instance.</span>
<span class="sd">     *</span>
<span class="sd">     * @return void</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">GMailServiceInterface</span> <span class="nv">$mailService</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">();</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">mailService</span> <span class="o">=</span> <span class="nv">$mailService</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="sd">/**</span>
<span class="sd">     * Execute the console command.</span>
<span class="sd">     *</span>
<span class="sd">     * @return mixed</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">handle</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$client</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getClient</span><span class="p">();</span>
        <span class="nv">$service</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Google_Service_Gmail</span><span class="p">(</span><span class="nv">$client</span><span class="p">);</span>
        <span class="nv">$user</span> <span class="o">=</span> <span class="s1">&#39;me&#39;</span><span class="p">;</span>
        <span class="nv">$opt_param</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;labelIds&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;INBOX&#39;</span><span class="p">];</span>
        <span class="nv">$messages</span> <span class="o">=</span> <span class="nv">$service</span><span class="o">-&gt;</span><span class="na">users_messages</span><span class="o">-&gt;</span><span class="na">listUsersMessages</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="nv">$opt_param</span><span class="p">);</span>
        <span class="nv">$bar</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">output</span><span class="o">-&gt;</span><span class="na">createProgressBar</span><span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$messages</span><span class="p">));</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$messages</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$message</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$message</span> <span class="o">=</span> <span class="nv">$service</span><span class="o">-&gt;</span><span class="na">users_messages</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nv">$user</span><span class="p">,</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">(),</span> <span class="p">[</span><span class="s1">&#39;format&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;full&#39;</span><span class="p">]);</span>
            <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">mailService</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">([</span>
                <span class="s1">&#39;email_id&#39;</span> <span class="o">=&gt;</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">(),</span>
                <span class="s1">&#39;snippet&#39;</span> <span class="o">=&gt;</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getSnippet</span><span class="p">(),</span>
                <span class="s1">&#39;headers&#39;</span> <span class="o">=&gt;</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getPayload</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getHeaders</span><span class="p">()),</span>
                <span class="s1">&#39;body&#39;</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getPayload</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getData</span><span class="p">())</span> <span class="o">?</span>
                    <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getPayload</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getData</span><span class="p">()</span> <span class="o">:</span> <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getPayload</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getParts</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">body</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">),</span>
                <span class="s1">&#39;internal_date&#39;</span> <span class="o">=&gt;</span> <span class="nx">Carbon</span><span class="o">::</span><span class="na">createFromTimestamp</span><span class="p">(</span><span class="nv">$message</span><span class="o">-&gt;</span><span class="na">getInternalDate</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span>
                    <span class="o">-&gt;</span><span class="na">toDateTimeString</span><span class="p">()</span>
            <span class="p">]);</span>

            <span class="nv">$bar</span><span class="o">-&gt;</span><span class="na">advance</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="nv">$bar</span><span class="o">-&gt;</span><span class="na">finish</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">function</span> <span class="nf">googleScopes</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="p">[</span>
            <span class="nx">\Google_Service_Gmail</span><span class="o">::</span><span class="na">MAIL_GOOGLE_COM</span><span class="p">,</span>
        <span class="p">]);</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">function</span> <span class="nf">getClient</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Google_Client</span><span class="p">();</span>
        <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">setApplicationName</span><span class="p">(</span><span class="nb">getenv</span><span class="p">(</span><span class="s1">&#39;APP_NAME&#39;</span><span class="p">));</span>
        <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">setScopes</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">googleScopes</span><span class="p">());</span>
        <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">setAuthConfig</span><span class="p">(</span><span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../../../.credentials/gmail_client.json&#39;</span><span class="p">);</span>
        <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">setAccessType</span><span class="p">(</span><span class="s1">&#39;offline&#39;</span><span class="p">);</span>

        <span class="nv">$credentialsPath</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">expandHomeDirectory</span><span class="p">(</span><span class="no">__DIR__</span> <span class="o">.</span> <span class="s1">&#39;/../../../.credentials/gmail_token.json&#39;</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$credentialsPath</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$accessToken</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nb">file_get_contents</span><span class="p">(</span><span class="nv">$credentialsPath</span><span class="p">),</span> <span class="k">true</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nv">$authUrl</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">createAuthUrl</span><span class="p">();</span>
            <span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;Open the following link in your browser:</span><span class="se">\n</span><span class="s2">%s</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$authUrl</span><span class="p">);</span>
            <span class="k">print</span> <span class="s1">&#39;Enter verification code: &#39;</span><span class="p">;</span>
            <span class="nv">$authCode</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nb">fgets</span><span class="p">(</span><span class="nx">STDIN</span><span class="p">));</span>

            <span class="nv">$accessToken</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">fetchAccessTokenWithAuthCode</span><span class="p">(</span><span class="nv">$authCode</span><span class="p">);</span>

            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">file_exists</span><span class="p">(</span><span class="nb">dirname</span><span class="p">(</span><span class="nv">$credentialsPath</span><span class="p">)))</span> <span class="p">{</span>
                <span class="nb">mkdir</span><span class="p">(</span><span class="nb">dirname</span><span class="p">(</span><span class="nv">$credentialsPath</span><span class="p">),</span> <span class="mo">0700</span><span class="p">,</span> <span class="k">true</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nb">file_put_contents</span><span class="p">(</span><span class="nv">$credentialsPath</span><span class="p">,</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$accessToken</span><span class="p">));</span>
            <span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;Credentials saved to %s</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$credentialsPath</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">setAccessToken</span><span class="p">(</span><span class="nv">$accessToken</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">$client</span><span class="o">-&gt;</span><span class="na">isAccessTokenExpired</span><span class="p">())</span> <span class="p">{</span>
            <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">fetchAccessTokenWithRefreshToken</span><span class="p">(</span><span class="nv">$client</span><span class="o">-&gt;</span><span class="na">getRefreshToken</span><span class="p">());</span>
            <span class="nb">file_put_contents</span><span class="p">(</span><span class="nv">$credentialsPath</span><span class="p">,</span> <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$client</span><span class="o">-&gt;</span><span class="na">getAccessToken</span><span class="p">()));</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nv">$client</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="k">function</span> <span class="nf">expandHomeDirectory</span><span class="p">(</span><span class="nv">$path</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$homeDirectory</span> <span class="o">=</span> <span class="nb">getenv</span><span class="p">(</span><span class="s1">&#39;HOME&#39;</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$homeDirectory</span><span class="p">))</span> <span class="p">{</span>
            <span class="nv">$homeDirectory</span> <span class="o">=</span> <span class="nb">getenv</span><span class="p">(</span><span class="s1">&#39;HOMEDRIVE&#39;</span><span class="p">)</span> <span class="o">.</span> <span class="nb">getenv</span><span class="p">(</span><span class="s1">&#39;HOMEPATH&#39;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">,</span> <span class="nb">realpath</span><span class="p">(</span><span class="nv">$homeDirectory</span><span class="p">),</span> <span class="nv">$path</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p><a class="reference external" href="https://developers.google.com/gmail/api/quickstart/php">https://developers.google.com/gmail/api/quickstart/php</a>.</p>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="php-storm.html" title="previous chapter (use the left arrow)">PhpStorm Keymap Reference</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="repositories-doctrine.html" title="next chapter (use the right arrow)">Using Repositories in Doctrine 2</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="repositories-doctrine.html" title="Using Repositories in Doctrine 2"
             >next</a> |</li>
        <li class="right" >
          <a href="php-storm.html" title="PhpStorm Keymap Reference"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Reference Documentation</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2009-2018 Jasper Carpizo. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-133821205-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>