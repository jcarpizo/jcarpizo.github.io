
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="../../_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="../../_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="../../_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>1.1. Abstract Factory &#8212; DesignPatternsPHP 1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="1.2. Builder" href="../Builder/README.html" />
    <link rel="prev" title="1. Creational" href="../README.html" />
  
   

  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../Builder/README.html" title="1.2. Builder"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../README.html" title="1. Creational"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../README.html">DesignPatternsPHP 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../README.html" accesskey="U">1. Creational</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar"><a href="
    ../../README.html" class="text-logo">DesignPatternsPHP</a>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../README.html">1. Creational</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.1. Abstract Factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Builder/README.html">1.2. Builder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../FactoryMethod/README.html">1.3. Factory Method</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Multiton/README.html">1.4. Multiton</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Pool/README.html">1.5. Pool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Prototype/README.html">1.6. Prototype</a></li>
<li class="toctree-l2"><a class="reference internal" href="../SimpleFactory/README.html">1.7. Simple Factory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Singleton/README.html">1.8. Singleton</a></li>
<li class="toctree-l2"><a class="reference internal" href="../StaticFactory/README.html">1.9. Static Factory</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Structural/README.html">2. Structural</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Behavioral/README.html">3. Behavioral</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../More/README.html">4. More</a></li>
</ul>

    
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="../../search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="../../README.html">Docs</a></li>
              
                <li><a href="../README.html">1. Creational</a></li>
              
              <li>1.1. Abstract Factory</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <div class="section" id="abstract-factory">
<h1>1.1. <a class="reference external" href="http://en.wikipedia.org/wiki/Abstract_factory_pattern">Abstract Factory</a><a class="headerlink" href="#abstract-factory" title="Permalink to this headline">¶</a></h1>
<div class="section" id="purpose">
<h2>1.1.1. Purpose<a class="headerlink" href="#purpose" title="Permalink to this headline">¶</a></h2>
<p>To create series of related or dependent objects without specifying
their concrete classes. Usually the created classes all implement the
same interface. The client of the abstract factory does not care about
how these objects are created, he just knows how they go together.</p>
</div>
<div class="section" id="uml-diagram">
<h2>1.1.2. UML Diagram<a class="headerlink" href="#uml-diagram" title="Permalink to this headline">¶</a></h2>
<img alt="Alt AbstractFactory UML Diagram" class="align-center" src="../../_images/uml12.png" />
</div>
<div class="section" id="code">
<h2>1.1.3. Code<a class="headerlink" href="#code" title="Permalink to this headline">¶</a></h2>
<p>You can also find this code on <a class="reference external" href="https://github.com/domnikl/DesignPatternsPHP/tree/master/Creational/AbstractFactory">GitHub</a></p>
<p>AbstractFactory.php</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">DesignPatterns\Creational\AbstractFactory</span><span class="p">;</span>

<span class="sd">/**</span>
<span class="sd"> * In this case, the abstract factory is a contract for creating some components</span>
<span class="sd"> * for the web. There are two ways of rendering text: HTML and JSON</span>
<span class="sd"> */</span>
<span class="k">abstract</span> <span class="k">class</span> <span class="nc">AbstractFactory</span>
<span class="p">{</span>
    <span class="k">abstract</span> <span class="k">public</span> <span class="k">function</span> <span class="nf">createText</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$content</span><span class="p">)</span><span class="o">:</span> <span class="nx">Text</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>JsonFactory.php</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">DesignPatterns\Creational\AbstractFactory</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">JsonFactory</span> <span class="k">extends</span> <span class="nx">AbstractFactory</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">createText</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$content</span><span class="p">)</span><span class="o">:</span> <span class="nx">Text</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">JsonText</span><span class="p">(</span><span class="nv">$content</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>HtmlFactory.php</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">DesignPatterns\Creational\AbstractFactory</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">HtmlFactory</span> <span class="k">extends</span> <span class="nx">AbstractFactory</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">createText</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$content</span><span class="p">)</span><span class="o">:</span> <span class="nx">Text</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">HtmlText</span><span class="p">(</span><span class="nv">$content</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Text.php</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">DesignPatterns\Creational\AbstractFactory</span><span class="p">;</span>

<span class="k">abstract</span> <span class="k">class</span> <span class="nc">Text</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @var string</span>
<span class="sd">     */</span>
    <span class="k">protected</span> <span class="nv">$text</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="fm">__construct</span><span class="p">(</span><span class="nx">string</span> <span class="nv">$text</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">text</span> <span class="o">=</span> <span class="nv">$text</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>JsonText.php</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">DesignPatterns\Creational\AbstractFactory</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">JsonText</span> <span class="k">extends</span> <span class="nx">Text</span>
<span class="p">{</span>
    <span class="c1">// do something here</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>HtmlText.php</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">DesignPatterns\Creational\AbstractFactory</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">HtmlText</span> <span class="k">extends</span> <span class="nx">Text</span>
<span class="p">{</span>
    <span class="c1">// do something here</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="test">
<h2>1.1.4. Test<a class="headerlink" href="#test" title="Permalink to this headline">¶</a></h2>
<p>Tests/AbstractFactoryTest.php</p>
<div class="highlight-php"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">DesignPatterns\Creational\AbstractFactory\Tests</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">DesignPatterns\Creational\AbstractFactory\HtmlFactory</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">DesignPatterns\Creational\AbstractFactory\HtmlText</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">DesignPatterns\Creational\AbstractFactory\JsonFactory</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">DesignPatterns\Creational\AbstractFactory\JsonText</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">PHPUnit\Framework\TestCase</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">AbstractFactoryTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">testCanCreateHtmlText</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$factory</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">HtmlFactory</span><span class="p">();</span>
        <span class="nv">$text</span> <span class="o">=</span> <span class="nv">$factory</span><span class="o">-&gt;</span><span class="na">createText</span><span class="p">(</span><span class="s1">&#39;foobar&#39;</span><span class="p">);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertInstanceOf</span><span class="p">(</span><span class="nx">HtmlText</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="nv">$text</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">testCanCreateJsonText</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$factory</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">JsonFactory</span><span class="p">();</span>
        <span class="nv">$text</span> <span class="o">=</span> <span class="nv">$factory</span><span class="o">-&gt;</span><span class="na">createText</span><span class="p">(</span><span class="s1">&#39;foobar&#39;</span><span class="p">);</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertInstanceOf</span><span class="p">(</span><span class="nx">JsonText</span><span class="o">::</span><span class="na">class</span><span class="p">,</span> <span class="nv">$text</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="../README.html" title="previous chapter (use the left arrow)">1. Creational</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="../Builder/README.html" title="next chapter (use the right arrow)">1.2. Builder</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../Builder/README.html" title="1.2. Builder"
             >next</a> |</li>
        <li class="right" >
          <a href="../README.html" title="1. Creational"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../README.html">DesignPatternsPHP 1.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../README.html" >1. Creational</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="../../_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2015, Dominik Liebler and contributors. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  </body>
</html>