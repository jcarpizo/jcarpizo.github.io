


<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>How To Install Linux, Nginx, MySQL, PHP (LEMP stack) on Ubuntu 18.04 &#8212; Jasper Carpizo</title>
    <link rel="stylesheet" href="_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="shortcut icon" href="_static/jenkins.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="XAMPP - Replacing MariaDB with MySQL" href="xampp.html" />
    <link rel="prev" title="Install LAMP in one command" href="lamp.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="xampp.html" title="XAMPP - Replacing MariaDB with MySQL"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="lamp.html" title="Install LAMP in one command"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Reference Documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar"><a href="
    index.html" class="text-logo">Jasper Carpizo</a>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="lamp.html">Install LAMP in one command</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">How To Install Linux, Nginx, MySQL, PHP (LEMP stack) on Ubuntu 18.04</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installing-the-nginx-web-server">Installing the Nginx Web Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installing-mysql-to-manage-site-data">Installing MySQL to Manage Site Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installing-php-and-configuring-nginx-to-use-the-php-processor">Installing PHP and Configuring Nginx to Use the PHP Processor</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-php-file-to-test-configuration">Creating a PHP File to Test Configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="xampp.html">XAMPP - Replacing MariaDB with MySQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="mac-mysql.html">Install MySQL on Mac OS X</a></li>
<li class="toctree-l1"><a class="reference internal" href="php-install.html">Install PHP 5.6 or PHP 7.1 on Ubuntu 16.04, 14.04 using PPA</a></li>
<li class="toctree-l1"><a class="reference internal" href="sphinx.html">Install Sphinx Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-node.html">Install Node.js via Package Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="ejabberd.html">Install eJabberd XMPP Server on Ubuntu 14</a></li>
<li class="toctree-l1"><a class="reference internal" href="mac-php.html">Update PHP on Mac OS X</a></li>
<li class="toctree-l1"><a class="reference internal" href="php-codesniffer.html">PHP CodeSniffer</a></li>
<li class="toctree-l1"><a class="reference internal" href="virtual-host.html">Set Up Apache Virtual Hosts on Ubuntu 16.04 LTS</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiple-php.html">Switch between Multiple PHP Version on Ubuntu</a></li>
<li class="toctree-l1"><a class="reference internal" href="doctrine.html">Doctrine Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="solid.html">The First 5 Principles of Object Oriented Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="file-permission.html">Unix / Linux File permissions</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Docker Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="git.html">Git Training Videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="git-flow.html">Git Flow Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="adwords-api.html">Adwords API Reporting</a></li>
<li class="toctree-l1"><a class="reference internal" href="tao-of-programming.html">The Tao / Zen of Programming</a></li>
<li class="toctree-l1"><a class="reference internal" href="php-storm.html">PhpStorm Keymap Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="sync-gmail-inbox.html">Synchronized GMail Inbox [PHP]</a></li>
<li class="toctree-l1"><a class="reference internal" href="repositories-doctrine.html">Using Repositories in Doctrine 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="composite-pattern.html">Composite Pattern in PHP</a></li>
<li class="toctree-l1"><a class="reference internal" href="owasp.html">OWASP Secure Coding Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="mysql.html">Getting the Best MySQL Performance in Your Products</a></li>
<li class="toctree-l1"><a class="reference internal" href="menu-tree.html">Build a Menu with Recursive Functions</a></li>
</ul>

    
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="index.html">Docs</a></li>
              
              <li>How To Install Linux, Nginx, MySQL, PHP (LEMP stack) on Ubuntu 18.04</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <div class="section" id="how-to-install-linux-nginx-mysql-php-lemp-stack-on-ubuntu-18-04">
<h1>How To Install Linux, Nginx, MySQL, PHP (LEMP stack) on Ubuntu 18.04<a class="headerlink" href="#how-to-install-linux-nginx-mysql-php-lemp-stack-on-ubuntu-18-04" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The LEMP software stack is a group of software that can be used to serve dynamic web pages and web applications. This is an acronym that describes a <strong>Linux</strong> operating system, with an Nginx (pronounced like <strong>“Engine-X”</strong>) web server. The backend data is stored in the <strong>MySQL</strong> database and the dynamic processing is handled by <strong>PHP</strong>.</p>
<p>This guide demonstrates how to install a LEMP stack on an Ubuntu 18.04 server. The Ubuntu operating system takes care of the first requirement. We will describe how to get the rest of the components up and running.</p>
</div>
<div class="section" id="installing-the-nginx-web-server">
<h2>Installing the Nginx Web Server<a class="headerlink" href="#installing-the-nginx-web-server" title="Permalink to this headline">¶</a></h2>
<p>In order to display web pages to our site visitors, we are going to employ Nginx, a modern, efficient web server.</p>
<p>All of the software used in this procedure will come from Ubuntu’s default package repositories. This means we can use the <code class="docutils literal notranslate"><span class="pre">apt</span></code> package management suite to complete the necessary installations.</p>
<p>Since this is our first time using <code class="docutils literal notranslate"><span class="pre">apt</span></code> for this session, start off by updating your server’s package index. Following that, install the server:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt update</span>

<span class="go">sudo apt install nginx</span>
</pre></div>
</div>
<p>On Ubuntu 18.04, Nginx is configured to start running upon installation.</p>
<p>If you have the <code class="docutils literal notranslate"><span class="pre">ufw</span></code> firewall running, as outlined in the initial setup guide, you will need to allow connections to Nginx. Nginx registers itself with <code class="docutils literal notranslate"><span class="pre">ufw</span></code> upon installation, so the procedure is rather straightforward.</p>
<p>It is recommended that you enable the most restrictive profile that will still allow the traffic you want. Since you haven’t configured SSL for your server in this guide, you will only need to allow traffic on port <code class="docutils literal notranslate"><span class="pre">80</span></code>.</p>
<p>Enable this by typing:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo ufw allow &#39;Nginx HTTP&#39;</span>
</pre></div>
</div>
<p>You can verify the change by running:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo ufw status</span>
</pre></div>
</div>
<p>This command’s output will show that HTTP traffic is allowed:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Status: active</span>

<span class="go">To                         Action      From</span>
<span class="go">--                         ------      ----</span>
<span class="go">OpenSSH                    ALLOW       Anywhere</span>
<span class="go">Nginx HTTP                 ALLOW       Anywhere</span>
<span class="go">OpenSSH (v6)               ALLOW       Anywhere (v6)</span>
<span class="go">Nginx HTTP (v6)            ALLOW       Anywhere (v6)</span>
</pre></div>
</div>
<p>With the new firewall rule added, you can test if the server is up and running by accessing your server’s domain name or public IP address in your web browser.</p>
<p>If you do not have a domain name pointed at your server and you do not know your server’s public IP address, you can find it by running the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ip addr show eth0 <span class="p">|</span> grep inet <span class="p">|</span> awk <span class="s1">&#39;{ print $2; }&#39;</span> <span class="p">|</span> sed <span class="s1">&#39;s/\/.*$//&#39;</span>
</pre></div>
</div>
<p>This will print out a few IP addresses. You can try each of them in turn in your web browser.</p>
<p>As an alternative, you can check which IP address is accessible, as viewed from other locations on the internet:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> curl -4 icanhazip.com
</pre></div>
</div>
<p>Type the address that you receive in your web browser and it will take you to Nginx’s default landing page:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">http://localhost</span>
</pre></div>
</div>
</div>
<div class="section" id="installing-mysql-to-manage-site-data">
<h2>Installing MySQL to Manage Site Data<a class="headerlink" href="#installing-mysql-to-manage-site-data" title="Permalink to this headline">¶</a></h2>
<p>Now that you have a web server, you need to install MySQL (a database management system) to store and manage the data for your site.</p>
<p>Install MySQL by typing:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt install mysql-server</span>
</pre></div>
</div>
<p>The MySQL database software is now installed, but its configuration is not yet complete.</p>
<p>To secure the installation, MySQL comes with a script that will ask whether we want to modify some insecure defaults. Initiate the script by typing:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo mysql_secure_installation</span>
</pre></div>
</div>
<p>This script will ask if you want to configure the <code class="docutils literal notranslate"><span class="pre">VALIDATE</span> <span class="pre">PASSWORD</span> <span class="pre">PLUGIN</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Enabling this feature is something of a judgment call. If enabled, passwords which don’t match the specified criteria will be rejected by MySQL with an error. This will cause issues if you use a weak password in conjunction with software which automatically configures MySQL user credentials, such as the Ubuntu packages for phpMyAdmin. It is safe to leave validation disabled, but you should always use strong, unique passwords for database credentials.</p>
</div>
<p>Answer <code class="docutils literal notranslate"><span class="pre">Y</span></code> for yes, or anything else to continue without enabling.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">VALIDATE PASSWORD PLUGIN can be used to test passwords</span>
<span class="go">and improve security. It checks the strength of password</span>
<span class="go">and allows the users to set only those passwords which are</span>
<span class="go">secure enough. Would you like to setup VALIDATE PASSWORD plugin?</span>

<span class="go">Press y|Y for Yes, any other key for No:</span>
</pre></div>
</div>
<p>If you’ve enabled validation, the script will also ask you to select a level of password validation. Keep in mind that if you enter <strong>2</strong> – for the strongest level – you will receive errors when attempting to set any password which does not contain numbers, upper and lowercase letters, and special characters, or which is based on common dictionary words.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">There are three levels of password validation policy:</span>

<span class="go">LOW    Length &gt;= 8</span>
<span class="go">MEDIUM Length &gt;= 8, numeric, mixed case, and special characters</span>
<span class="go">STRONG Length &gt;= 8, numeric, mixed case, special characters and dictionary file</span>

<span class="go">Please enter 0 = LOW, 1 = MEDIUM and 2 = STRONG: 1</span>

<span class="go">Next, you&#39;ll be asked to submit and confirm a root password:</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Please set the password for root here.</span>

<span class="go">New password:</span>

<span class="go">Re-enter new password:</span>
</pre></div>
</div>
<p>For the rest of the questions, you should press <code class="docutils literal notranslate"><span class="pre">Y</span></code> and hit the <code class="docutils literal notranslate"><span class="pre">ENTER</span></code> key at each prompt. This will remove some anonymous users and the test database, disable remote root logins, and load these new rules so that MySQL immediately respects the changes we have made.</p>
<p>Note that in Ubuntu systems running MySQL 5.7 (and later versions), the <code class="docutils literal notranslate"><span class="pre">root</span></code> MySQL user is set to authenticate using the <code class="docutils literal notranslate"><span class="pre">auth_socket</span></code> plugin by default rather than with a password. This allows for some greater security and usability in many cases, but it can also complicate things when you need to allow an external program (e.g., phpMyAdmin) to access the user.</p>
<p>If you prefer to use a password when connecting to MySQL as root, you will need to switch its authentication method from <code class="docutils literal notranslate"><span class="pre">auth_socket</span></code> to <code class="docutils literal notranslate"><span class="pre">mysql_native_password</span></code>. To do this, open up the MySQL prompt from your terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo mysql</span>
</pre></div>
</div>
<p>Next, check which authentication method each of your MySQL user accounts use with the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mysql&gt; SELECT user,authentication_string,plugin,host FROM mysql.user;</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">+------------------+-------------------------------------------+-----------------------+-----------+</span>
<span class="go">| user             | authentication_string                     | plugin                | host      |</span>
<span class="go">+------------------+-------------------------------------------+-----------------------+-----------+</span>
<span class="go">| root             |                                           | auth_socket           | localhost |</span>
<span class="go">| mysql.session    | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE | mysql_native_password | localhost |</span>
<span class="go">| mysql.sys        | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE | mysql_native_password | localhost |</span>
<span class="go">| debian-sys-maint | *CC744277A401A7D25BE1CA89AFF17BF607F876FF | mysql_native_password | localhost |</span>
<span class="go">+------------------+-------------------------------------------+-----------------------+-----------+</span>
<span class="go">4 rows in set (0.00 sec)</span>
</pre></div>
</div>
<p>In this example, you can see that the root user does in fact authenticate using the auth_socket plugin. To configure the root account to authenticate with a password, run the following ALTER USER command. Be sure to change password to a strong password of your choosing:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mysql&gt; ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;password&#39;;</span>
</pre></div>
</div>
<p>Then, run <code class="docutils literal notranslate"><span class="pre">FLUSH</span> <span class="pre">PRIVILEGES</span></code> which tells the server to reload the grant tables and put your new changes into effect:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mysql&gt; FLUSH PRIVILEGES;</span>
</pre></div>
</div>
<p>Check the authentication methods employed by each of your users again to confirm that root no longer authenticates using the auth_socket plugin:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mysql&gt; SELECT user,authentication_string,plugin,host FROM mysql.user;</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">+------------------+-------------------------------------------+-----------------------+-----------+</span>
<span class="go">| user             | authentication_string                     | plugin                | host      |</span>
<span class="go">+------------------+-------------------------------------------+-----------------------+-----------+</span>
<span class="go">| root             | *3636DACC8616D997782ADD0839F92C1571D6D78F | mysql_native_password | localhost |</span>
<span class="go">| mysql.session    | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE | mysql_native_password | localhost |</span>
<span class="go">| mysql.sys        | *THISISNOTAVALIDPASSWORDTHATCANBEUSEDHERE | mysql_native_password | localhost |</span>
<span class="go">| debian-sys-maint | *CC744277A401A7D25BE1CA89AFF17BF607F876FF | mysql_native_password | localhost |</span>
<span class="go">+------------------+-------------------------------------------+-----------------------+-----------+</span>
<span class="go">4 rows in set (0.00 sec)</span>
</pre></div>
</div>
<p>You can see in this example output that the <code class="docutils literal notranslate"><span class="pre">root</span></code> MySQL user now authenticates using a password. Once you confirm this on your own server, you can exit the MySQL shell:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mysql&gt; exit</span>
</pre></div>
</div>
<p>At this point, your database system is now set up and you can move on to installing PHP.</p>
</div>
<div class="section" id="installing-php-and-configuring-nginx-to-use-the-php-processor">
<h2>Installing PHP and Configuring Nginx to Use the PHP Processor<a class="headerlink" href="#installing-php-and-configuring-nginx-to-use-the-php-processor" title="Permalink to this headline">¶</a></h2>
<p>You now have Nginx installed to serve your pages and MySQL installed to store and manage your data. However, you still don’t have anything that can generate dynamic content. This is where PHP comes into play.</p>
<p>Since Nginx does not contain native PHP processing like some other web servers, you will need to install <code class="docutils literal notranslate"><span class="pre">php-fpm</span></code>, which stands for “fastCGI process manager”. We will tell Nginx to pass PHP requests to this software for processing.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Depending on your cloud provider, you may need to add Ubuntu’s <code class="docutils literal notranslate"><span class="pre">universe</span></code> repository, which includes free and open-source software maintained by the Ubuntu community, before installing the <code class="docutils literal notranslate"><span class="pre">php-fpm</span> <span class="pre">package</span></code>. You can do this by typing:</p>
<p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">add-apt-repository</span> <span class="pre">universe</span></code></p>
</div>
<p>Install the <code class="docutils literal notranslate"><span class="pre">php-fpm</span></code> module along with an additional helper package, <code class="docutils literal notranslate"><span class="pre">php-mysql</span></code>, which will allow PHP to communicate with your database backend. The installation will pull in the necessary PHP core files. Do this by typing:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo apt install php-fpm php-mysql</span>
</pre></div>
</div>
<p>You now have all of the required LEMP stack components installed, but you still need to make a few configuration changes in order to tell Nginx to use the PHP processor for dynamic content.</p>
<p>This is done on the server block level (server blocks are similar to Apache’s virtual hosts). To do this, open a new server block configuration file within the /etc/nginx/sites-available/ directory. In this example, the new server block configuration file is named example.com, although you can name yours whatever you’d like:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo nano /etc/nginx/sites-available/local-wms</span>
</pre></div>
</div>
<p>By editing a new server block configuration file, rather than editing the default one, you’ll be able to easily restore the default configuration if you ever need to.</p>
<p>Add the following content, which was taken and slightly modified from the default server block configuration file, to your new server block configuration file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">server {</span>
<span class="go">    listen 80;</span>
<span class="go">    listen [::]:80;</span>

<span class="go">    root /var/www/html/courex-wms; # folder directory</span>
<span class="go">    index index.php index.html index.htm;</span>
<span class="go">    autoindex on;</span>
<span class="go">    autoindex_exact_size off;</span>

<span class="go">    server_name local-wms; # host name; change /etc/hosts</span>

<span class="go">    location / {</span>
<span class="go">        try_files $uri $uri/ =404;</span>
<span class="go">    }</span>

<span class="go">    location ~ \.php$ {</span>
<span class="go">         include snippets/fastcgi-php.conf;</span>
<span class="go">         fastcgi_pass unix:/run/php/php5.6-fpm.sock; # php 5.6; php 7</span>

<span class="go">    }</span>

<span class="go">    location ~ /\.ht {</span>
<span class="go">            deny all;</span>
<span class="go">    }</span>
<span class="go">}</span>
</pre></div>
</div>
<p>Here’s what each of these directives and location blocks do:</p>
<ul>
    <li><b>listen</b> — Defines what port Nginx will listen on. In this case, it will listen on port 80, the default port for HTTP.</i>
    <li><b>root</b> — Defines the document root where the files served by the website are stored.</i>
    <li><b>index</b> — Configures Nginx to prioritize serving files named index.php when an index file is requested, if they’re available.</i>
    <li><b>server_name</b> — Defines which server block should be used for a given request to your server. <b>Point this directive to your server's domain name or public IP address</b>.</i>
    <li><b>location /</b> — The first location block includes a try_files directive, which checks for the existence of files matching a URI request. If Nginx cannot find the appropriate file, it will return a 404 error.</i>
    <li><b>location ~ \.php$ </b> — This location block handles the actual PHP processing by pointing Nginx to the fastcgi-php.conf configuration file and the php7.2-fpm.sock file, which declares what socket is associated with php-fpm.</i>
    <li><b>location ~ /\.ht </b> — The last location block deals with .htaccess files, which Nginx does not process. By adding the deny all directive, if any .htaccess files happen to find their way into the document root they will not be served to visitors.</i>
</ul><p>After adding this content, save and close the file. Enable your new server block by creating a symbolic link from your new server block configuration file (in the /etc/nginx/sites-available/ directory) to the /etc/nginx/sites-enabled/ directory:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo ln -s /etc/nginx/sites-available/local-wms /etc/nginx/sites-enabled/</span>
</pre></div>
</div>
<p>Then, unlink the default configuration file from the /sites-enabled/ directory:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo unlink /etc/nginx/sites-enabled/default</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you ever need to restore the default configuration, you can do so by recreating the symbolic link, like this:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">sudo</span> <span class="pre">ln</span> <span class="pre">-s</span> <span class="pre">/etc/nginx/sites-available/default</span> <span class="pre">/etc/nginx/sites-enabled/</span></code></p>
</div>
<p>Test your new configuration file for syntax errors by typing:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo nginx -t</span>
</pre></div>
</div>
<p>If any errors are reported, go back and recheck your file before continuing.</p>
<p>When you are ready, reload Nginx to make the necessary changes:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo systemctl reload nginx</span>
</pre></div>
</div>
<p>This concludes the installation and configuration of your LEMP stack. However, it’s prudent to confirm that all of the components can communicate with one another.</p>
</div>
<div class="section" id="creating-a-php-file-to-test-configuration">
<h2>Creating a PHP File to Test Configuration<a class="headerlink" href="#creating-a-php-file-to-test-configuration" title="Permalink to this headline">¶</a></h2>
<p>Your LEMP stack should now be completely set up. You can test it to validate that Nginx can correctly hand .php files off to the PHP processor.</p>
<p>To do this, use your text editor to create a test PHP file called info.php in your document root:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo vi /var/www/html/info.php</span>
</pre></div>
</div>
<p>Enter the following lines into the new file. This is valid PHP code that will return information about your server:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;?</span><span class="nx">php</span> <span class="nb">phpinfo</span><span class="p">();</span>
</pre></div>
</div>
<p>When you are finished, save and close the file.</p>
<p>Now, you can visit this page in your web browser by visiting your server’s domain name or public IP address followed by /info.php:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">http://your_server_domain_or_IP/info.php</span>
</pre></div>
</div>
<p>You should see a web page that has been generated by PHP with information about your server:</p>
<p>If you see a page that looks like this, you’ve set up PHP processing with Nginx successfully.</p>
<p>After verifying that Nginx renders the page correctly, it’s best to remove the file you created as it can actually give unauthorized users some hints about your configuration that may help them try to break in. You can always regenerate this file if you need it later.</p>
<p>For now, remove the file by typing:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">sudo rm /var/www/html/info.php</span>
</pre></div>
</div>
<p>With that, you now have a fully-configured and functioning LEMP stack on your Ubuntu 18.04 server.</p>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="lamp.html" title="previous chapter (use the left arrow)">Install LAMP in one command</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="xampp.html" title="next chapter (use the right arrow)">XAMPP - Replacing MariaDB with MySQL</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="xampp.html" title="XAMPP - Replacing MariaDB with MySQL"
             >next</a> |</li>
        <li class="right" >
          <a href="lamp.html" title="Install LAMP in one command"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Reference Documentation</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2009-2018 Jasper Carpizo. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-133821205-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>